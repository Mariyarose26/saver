<div class="cont" x-data="{ rightSide: false, leftSide: false }">
  <div class="left-side" :class="{'active' : leftSide}">
    <div class="left-side-button" @click="leftSide = !leftSide">
      <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"
        stroke-linejoin="round">
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
      <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"
        viewBox="0 0 24 24">
        <path d="M19 12H5M12 19l-7-7 7-7" />
      </svg>
    </div>
    <div class="logo">
      <p>SAVER</p>
    </div>
    <div id = "user">
      <ul class="navbar-nav mr-auto">
        <% if user_signed_in? %>
          <li class="nav-item dropdown">
            <%= image_tag "https://kitt.lewagon.com/placeholder/users/ssaunier", class: "avatar dropdown-toggle", id: "navbarDropdown", data: { toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
            <div class="dropdown-menu " aria-labelledby="navbarDropdown">
              <%= link_to "Dashboard", "#", class: "dropdown-item" %>
              <%= link_to "Profile", "#", class: "dropdown-item" %>
              <%= link_to "Log out", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
            </div>
          </li>
          <br>
          <span class="mr-10"><%= "Welcome\n" %></span>
          <span class="ml-3"><%= "#{current_user.first_name}" %></span>
        <% else %>
          <li class="nav-item">
            <%= link_to "Login", new_user_session_path, class: "nav-link" %>
          </li>
        <% end %>
      </ul>
    </div>
    <div class="side-wrapper">
      <div class="side-title">MENU</div>
      <div class="side-menu">
        <a href="/">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
            <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z" />
            <path d="M9 22V12h6v10" />
          </svg>
          Home
        </a>
        <% # Dropdown ---------------------------------------------------------------- %>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active " id="menu" role="tabpanel" aria-labelledby="menu-tab">
            <div class="d-flex align-items-center accordion-heading" id= "tabs" data-toggle="collapse" data-target="#submenu1" role="button" aria-expanded="true" aria-controls="collapseExample">
              <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"
              viewBox="0 0 24 24">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
              </svg>
              Folders
              <% # ---------------------------------------------- %>
              <div class="btn-group">
                <i class="fa fa-plus ml-5" id= "icon" aria-hidden="true" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
                  <div class = "form">
                    <%= simple_form_for (@create) do |f| %>
                      <%= f.input :name %>
                      <%= f.button :submit, "Create Folder" %>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
            <% # ---------------------------------------------------------------- %>
            <div class="dropdown ml-4">
              <% if user_signed_in? %>
                <% @folders.each do |folder| %>
                  <% if (folder.user_id == current_user.id) %>
                    <li style = "list-style-type: none" >
                      <ul class="nav nav-list collapse " id="submenu1" >
                        <%= link_to "#{folder.name}", folder, class: "flex-fill p-2 #{"hover-color" if (folder.id == params[:id].to_i)}", id: "tab", type: "button", title: "Title" %>
                      </ul>
                    </li>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>
      </a>
    </div>
    <% if (!@chatroom.nil?) %>
      <%= link_to "General Chat", chatroom_path(@chatroom), class: "nav-link" %>
    <% end %>
    <div class = "chatroom pr-5">
      <h1>#<%= @chatroom.name %></h1>
      <br>
      <div id="messages" data-chatroom-id="<%= @chatroom.id %>">
        <% @chatroom.messages.each do |message| %>
          <div class="message-container" id="message-<%= message.id %>">
            <i class="author">
              <span><%= message.user.first_name %></span>
              <small><%= message.created_at.strftime("%a %b %e at %l:%M%p") %></small>
            </i>
            <p><%= message.content %></p>
          </div>
        <% end %>
      </div>
      <%= simple_form_for [@chatroom, @message], remote: true do |f| %>
        <%= f.input :content, label: false, placeholder: "Message ##{@chatroom.name}" %>
      <% end %>
    </div>
    <% # ---------------------------------------------------------------- %>
  </div>
</div>
</div>
